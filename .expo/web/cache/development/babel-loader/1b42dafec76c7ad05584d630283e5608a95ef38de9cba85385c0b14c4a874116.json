{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nimport 'react-native-get-random-values';\nimport { useState, useEffect } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport Platform from \"react-native-web/dist/exports/Platform\";\nimport { SafeAreaView } from 'react-native-safe-area-context';\nimport * as SecureStore from 'expo-secure-store';\nimport DateTimePicker from '@react-native-community/datetimepicker';\nimport { Picker } from '@react-native-picker/picker';\nimport { Feather } from '@expo/vector-icons';\nimport { initDB, saveOrUpdateUser, getUser } from \"../services/dbService\";\nimport { v4 as uuidv4 } from 'uuid';\nimport GoogleSyncService from \"../services/googleSync\";\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nexport default function ProfileSetupScreen(_ref) {\n  var navigation = _ref.navigation;\n  var _useState = useState(null),\n    _useState2 = _slicedToArray(_useState, 2),\n    userId = _useState2[0],\n    setUserId = _useState2[1];\n  var _useState3 = useState(''),\n    _useState4 = _slicedToArray(_useState3, 2),\n    name = _useState4[0],\n    setName = _useState4[1];\n  var _useState5 = useState(''),\n    _useState6 = _slicedToArray(_useState5, 2),\n    email = _useState6[0],\n    setEmail = _useState6[1];\n  var _useState7 = useState(null),\n    _useState8 = _slicedToArray(_useState7, 2),\n    googleId = _useState8[0],\n    setGoogleId = _useState8[1];\n  var _useState9 = useState(new Date(1990, 0, 1)),\n    _useState0 = _slicedToArray(_useState9, 2),\n    birthDate = _useState0[0],\n    setBirthDate = _useState0[1];\n  var _useState1 = useState(false),\n    _useState10 = _slicedToArray(_useState1, 2),\n    showDate = _useState10[0],\n    setShowDate = _useState10[1];\n  var _useState11 = useState(''),\n    _useState12 = _slicedToArray(_useState11, 2),\n    condition = _useState12[0],\n    setCondition = _useState12[1];\n  var _useState13 = useState(''),\n    _useState14 = _slicedToArray(_useState13, 2),\n    height = _useState14[0],\n    setHeight = _useState14[1];\n  var _useState15 = useState(''),\n    _useState16 = _slicedToArray(_useState15, 2),\n    weight = _useState16[0],\n    setWeight = _useState16[1];\n  var _useState17 = useState([]),\n    _useState18 = _slicedToArray(_useState17, 2),\n    restrictions = _useState18[0],\n    setRestrictions = _useState18[1];\n  var restrictionOptions = ['Lactose', 'Glúten', 'Amendoim', 'Ovos', 'Peixes', 'Crustáceos', 'Frutos Secos'];\n  useEffect(function () {\n    _asyncToGenerator(function* () {\n      try {\n        yield initDB();\n        var user = yield getUser();\n        if (user) {\n          setUserId(user.id);\n          setName(user.name);\n          setEmail(user.email);\n          setGoogleId(user.googleId || null);\n          var dateString = user.birthDate;\n          setBirthDate(dateString ? new Date(dateString) : new Date(1990, 0, 1));\n          setCondition(user.condition);\n          setHeight(user.height !== null ? String(user.height) : '');\n          setWeight(user.weight !== null ? String(user.weight) : '');\n          var userRestrictions = user.restriction;\n          setRestrictions(userRestrictions.split(',').filter(function (r) {\n            return r;\n          }));\n        } else {\n          var saved = yield SecureStore.getItemAsync('user_profile');\n          if (saved) {\n            var _profile$id, _profile$name, _profile$email, _profile$googleId, _profile$condition, _profile$restriction;\n            var profile = JSON.parse(saved);\n            setUserId((_profile$id = profile.id) != null ? _profile$id : uuidv4());\n            setName((_profile$name = profile.name) != null ? _profile$name : '');\n            setEmail((_profile$email = profile.email) != null ? _profile$email : '');\n            setGoogleId((_profile$googleId = profile.googleId) != null ? _profile$googleId : null);\n            var dateSaved = profile.birthDate;\n            setBirthDate(dateSaved ? new Date(dateSaved) : new Date(1990, 0, 1));\n            setCondition((_profile$condition = profile.condition) != null ? _profile$condition : '');\n            setHeight(profile.height ? String(profile.height) : '');\n            setWeight(profile.weight ? String(profile.weight) : '');\n            var savedRestrictions = (_profile$restriction = profile.restriction) != null ? _profile$restriction : '';\n            setRestrictions(savedRestrictions.split(',').filter(function (r) {\n              return r;\n            }));\n          } else {\n            setUserId(uuidv4());\n          }\n        }\n      } catch (err) {\n        console.error('Erro ao inicializar perfil:', err);\n        setUserId(uuidv4());\n      }\n    })();\n  }, []);\n  var toggleRestriction = function toggleRestriction(item) {\n    setRestrictions(function (prev) {\n      return prev.includes(item) ? prev.filter(function (r) {\n        return r !== item;\n      }) : [].concat(_toConsumableArray(prev), [item]);\n    });\n  };\n  var parsedHeight = height ? Number(height.replace(',', '.')) : 0;\n  var parsedWeight = weight ? Number(weight.replace(',', '.')) : 0;\n  var onDateChange = function onDateChange(_event, selected) {\n    setShowDate(false);\n    if (selected) {\n      setBirthDate(selected);\n    }\n  };\n  var handleSave = function () {\n    var _ref3 = _asyncToGenerator(function* () {\n      try {\n        var _draftProfile$height, _draftProfile$weight, _draftProfile$googleI;\n        if (!name.trim()) return Alert.alert('Erro', 'Digite seu nome.');\n        if (!birthDate || isNaN(birthDate.getTime())) return Alert.alert('Erro', 'Informe sua data de nascimento.');\n        if (!condition) return Alert.alert('Erro', 'Selecione sua condição.');\n        if (parsedHeight <= 0 || isNaN(parsedHeight)) return Alert.alert('Erro', 'Altura inválida (use cm).');\n        if (parsedWeight <= 0 || isNaN(parsedWeight)) return Alert.alert('Erro', 'Peso inválido.');\n        var registeredEmail = yield SecureStore.getItemAsync('registered_email');\n        var finalEmail = email.trim() || registeredEmail || 'placeholder@app.com';\n        var currentSyncedAt = new Date().toISOString();\n        var draftProfile = {\n          id: userId || uuidv4(),\n          name: name.trim(),\n          birthDate: birthDate.toISOString(),\n          condition: condition,\n          height: parsedHeight,\n          weight: parsedWeight,\n          restriction: restrictions.join(','),\n          email: finalEmail,\n          googleId: googleId,\n          onboardingCompleted: true,\n          biometricEnabled: false,\n          syncedAt: currentSyncedAt\n        };\n        var profileToSave = _objectSpread(_objectSpread({}, draftProfile), {}, {\n          height: (_draftProfile$height = draftProfile.height) != null ? _draftProfile$height : 0,\n          weight: (_draftProfile$weight = draftProfile.weight) != null ? _draftProfile$weight : 0,\n          googleId: (_draftProfile$googleI = draftProfile.googleId) != null ? _draftProfile$googleI : ''\n        });\n        var savedUser = yield saveOrUpdateUser(profileToSave);\n        if (typeof savedUser !== 'boolean') {\n          yield SecureStore.setItemAsync('user_profile', JSON.stringify(savedUser));\n        }\n        try {\n          var token = yield SecureStore.getItemAsync('google_token');\n          if (token && GoogleSyncService && typeof GoogleSyncService.uploadReadingsToDrive === 'function') {\n            yield GoogleSyncService.uploadReadingsToDrive(token);\n          }\n        } catch (err) {\n          console.warn('Falha ao sincronizar perfil (erro de execução do Drive):', err);\n        }\n        var biometricStatus = yield SecureStore.getItemAsync('biometric_setup_done');\n        if (!biometricStatus) {\n          Alert.alert('Sucesso', 'Perfil criado! Próxima etapa: Biometria.');\n          navigation.replace('BiometricSetup');\n        } else {\n          Alert.alert('Sucesso', 'Perfil atualizado!');\n          navigation.replace('DrawerRoutes');\n        }\n      } catch (err) {\n        console.error('handleSave profile - erro:', err);\n        Alert.alert('Erro', 'Não foi possível salvar o perfil.');\n      }\n    });\n    return function handleSave() {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n  return _jsx(SafeAreaView, {\n    style: styles.safe,\n    children: _jsx(ScrollView, {\n      contentContainerStyle: styles.container,\n      children: _jsxs(View, {\n        style: styles.card,\n        children: [_jsx(Text, {\n          style: styles.title,\n          children: \"Configura\\xE7\\xF5es\"\n        }), _jsx(Text, {\n          style: styles.subtitle,\n          children: \"Edite suas informa\\xE7\\xF5es pessoais\"\n        }), _jsxs(View, {\n          style: styles.inputWrapper,\n          children: [_jsx(Feather, {\n            name: \"user\",\n            size: 18,\n            color: \"#9ca3af\",\n            style: styles.inputIcon\n          }), _jsx(TextInput, {\n            style: styles.input,\n            placeholder: \"Nome Completo\",\n            value: name,\n            onChangeText: setName\n          })]\n        }), _jsxs(View, {\n          style: styles.inputWrapper,\n          children: [_jsx(Feather, {\n            name: \"calendar\",\n            size: 18,\n            color: \"#9ca3af\",\n            style: styles.inputIcon\n          }), _jsx(TextInput, {\n            style: styles.input,\n            placeholder: \"DD/MM/AAAA\",\n            keyboardType: \"numeric\",\n            value: birthDate.toLocaleDateString('pt-BR'),\n            editable: false\n          }), _jsx(TouchableOpacity, {\n            onPress: function onPress() {\n              return setShowDate(true);\n            },\n            children: _jsx(Feather, {\n              name: \"calendar\",\n              size: 20,\n              color: \"#2563eb\"\n            })\n          })]\n        }), showDate && _jsx(DateTimePicker, {\n          value: birthDate,\n          mode: \"date\",\n          display: Platform.OS === 'ios' ? 'spinner' : 'default',\n          onChange: onDateChange,\n          maximumDate: new Date()\n        }), _jsxs(View, {\n          style: styles.inputWrapper,\n          children: [_jsx(Feather, {\n            name: \"list\",\n            size: 18,\n            color: \"#9ca3af\",\n            style: styles.inputIcon\n          }), Platform.OS === 'ios' ? _jsx(TextInput, {\n            style: styles.input,\n            placeholder: \"Selecione a Condi\\xE7\\xE3o\",\n            value: condition === 'pre-diabetes' ? 'Pré-diabetes' : condition === 'tipo-1' ? 'Diabetes Tipo 1' : condition === 'tipo-2' ? 'Diabetes Tipo 2' : '',\n            editable: false\n          }) : null, _jsxs(Picker, {\n            selectedValue: condition,\n            onValueChange: setCondition,\n            style: [styles.pickerStyle, Platform.OS === 'ios' && {\n              position: 'absolute',\n              width: '100%',\n              opacity: 0\n            }],\n            itemStyle: styles.pickerItemStyle,\n            children: [_jsx(Picker.Item, {\n              label: \"Selecione a Condi\\xE7\\xE3o\",\n              value: \"\",\n              color: \"#9ca3af\"\n            }), _jsx(Picker.Item, {\n              label: \"Pr\\xE9-diabetes\",\n              value: \"pre-diabetes\"\n            }), _jsx(Picker.Item, {\n              label: \"Diabetes Tipo 1\",\n              value: \"tipo-1\"\n            }), _jsx(Picker.Item, {\n              label: \"Diabetes Tipo 2\",\n              value: \"tipo-2\"\n            })]\n          })]\n        }), _jsxs(View, {\n          style: styles.inputWrapper,\n          children: [_jsx(Feather, {\n            name: \"trending-up\",\n            size: 18,\n            color: \"#9ca3af\",\n            style: styles.inputIcon\n          }), _jsx(TextInput, {\n            style: styles.input,\n            placeholder: \"Altura (cm)\",\n            keyboardType: \"numeric\",\n            value: height,\n            onChangeText: setHeight\n          })]\n        }), _jsxs(View, {\n          style: styles.inputWrapper,\n          children: [_jsx(Feather, {\n            name: \"activity\",\n            size: 18,\n            color: \"#9ca3af\",\n            style: styles.inputIcon\n          }), _jsx(TextInput, {\n            style: styles.input,\n            placeholder: \"Peso (kg)\",\n            keyboardType: \"numeric\",\n            value: weight,\n            onChangeText: setWeight\n          })]\n        }), _jsx(Text, {\n          style: [styles.sectionLabel, {\n            marginTop: 10,\n            marginBottom: 5\n          }],\n          children: \"Restri\\xE7\\xF5es Alimentares\"\n        }), _jsx(View, {\n          style: styles.restrictionButtonsContainer,\n          children: restrictionOptions.map(function (item) {\n            var isSelected = restrictions.includes(item);\n            return _jsx(TouchableOpacity, {\n              style: [styles.restrictionButton, isSelected && styles.restrictionButtonSelected],\n              onPress: function onPress() {\n                return toggleRestriction(item);\n              },\n              children: _jsx(Text, {\n                style: [styles.restrictionButtonText, isSelected && styles.restrictionButtonTextSelected],\n                children: item\n              })\n            }, item);\n          })\n        }), _jsx(TouchableOpacity, {\n          style: styles.saveButton,\n          onPress: handleSave,\n          children: _jsx(Text, {\n            style: styles.saveText,\n            children: \"Salvar Altera\\xE7\\xF5es\"\n          })\n        })]\n      })\n    })\n  });\n}\nvar styles = StyleSheet.create({\n  safe: {\n    flex: 1,\n    backgroundColor: '#f0f6ff'\n  },\n  container: {\n    flexGrow: 1,\n    justifyContent: 'center',\n    padding: 16\n  },\n  card: {\n    backgroundColor: '#fff',\n    borderRadius: 16,\n    padding: 20,\n    shadowColor: '#000',\n    shadowOpacity: 0.08,\n    shadowRadius: 8,\n    elevation: 3\n  },\n  title: {\n    fontSize: 22,\n    fontWeight: '700',\n    textAlign: 'center',\n    marginBottom: 4,\n    color: '#111827'\n  },\n  subtitle: {\n    fontSize: 14,\n    textAlign: 'center',\n    color: '#6b7280',\n    marginBottom: 20\n  },\n  inputWrapper: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    borderWidth: 1,\n    borderColor: '#d1d5db',\n    borderRadius: 10,\n    marginBottom: 14,\n    paddingHorizontal: 12,\n    backgroundColor: '#fff'\n  },\n  inputIcon: {\n    marginRight: 8\n  },\n  input: {\n    flex: 1,\n    fontSize: 15,\n    paddingVertical: 10,\n    color: '#111827'\n  },\n  sectionLabel: {\n    fontSize: 14,\n    fontWeight: '600',\n    marginBottom: 8,\n    color: '#374151'\n  },\n  restrictionButtonsContainer: {\n    flexDirection: 'row',\n    flexWrap: 'wrap',\n    justifyContent: 'flex-start',\n    marginBottom: 10\n  },\n  restrictionButton: {\n    paddingVertical: 8,\n    paddingHorizontal: 12,\n    borderWidth: 1,\n    borderColor: '#d1d5db',\n    borderRadius: 20,\n    marginRight: 8,\n    marginBottom: 8,\n    backgroundColor: '#f9fafb'\n  },\n  restrictionButtonSelected: {\n    backgroundColor: '#2563eb',\n    borderColor: '#2563eb'\n  },\n  restrictionButtonText: {\n    color: '#374151',\n    fontSize: 13,\n    fontWeight: '500'\n  },\n  restrictionButtonTextSelected: {\n    color: '#fff'\n  },\n  saveButton: {\n    backgroundColor: '#2563eb',\n    padding: 14,\n    borderRadius: 10,\n    alignItems: 'center',\n    marginTop: 16,\n    shadowColor: '#000',\n    shadowOpacity: 0.1,\n    shadowRadius: 6,\n    elevation: 3\n  },\n  saveText: {\n    color: '#fff',\n    fontWeight: '600',\n    fontSize: 16\n  },\n  pickerStyle: {\n    flex: 1,\n    color: '#111827',\n    height: 40\n  },\n  pickerItemStyle: {\n    fontSize: 15\n  }\n});","map":{"version":3,"names":["useState","useEffect","View","Text","TextInput","TouchableOpacity","StyleSheet","Alert","ScrollView","Platform","SafeAreaView","SecureStore","DateTimePicker","Picker","Feather","initDB","saveOrUpdateUser","getUser","v4","uuidv4","GoogleSyncService","jsx","_jsx","jsxs","_jsxs","ProfileSetupScreen","_ref","navigation","_useState","_useState2","_slicedToArray","userId","setUserId","_useState3","_useState4","name","setName","_useState5","_useState6","email","setEmail","_useState7","_useState8","googleId","setGoogleId","_useState9","Date","_useState0","birthDate","setBirthDate","_useState1","_useState10","showDate","setShowDate","_useState11","_useState12","condition","setCondition","_useState13","_useState14","height","setHeight","_useState15","_useState16","weight","setWeight","_useState17","_useState18","restrictions","setRestrictions","restrictionOptions","_asyncToGenerator","user","id","dateString","String","userRestrictions","restriction","split","filter","r","saved","getItemAsync","_profile$id","_profile$name","_profile$email","_profile$googleId","_profile$condition","_profile$restriction","profile","JSON","parse","dateSaved","savedRestrictions","err","console","error","toggleRestriction","item","prev","includes","concat","_toConsumableArray","parsedHeight","Number","replace","parsedWeight","onDateChange","_event","selected","handleSave","_ref3","_draftProfile$height","_draftProfile$weight","_draftProfile$googleI","trim","alert","isNaN","getTime","registeredEmail","finalEmail","currentSyncedAt","toISOString","draftProfile","join","onboardingCompleted","biometricEnabled","syncedAt","profileToSave","_objectSpread","savedUser","setItemAsync","stringify","token","uploadReadingsToDrive","warn","biometricStatus","apply","arguments","style","styles","safe","children","contentContainerStyle","container","card","title","subtitle","inputWrapper","size","color","inputIcon","input","placeholder","value","onChangeText","keyboardType","toLocaleDateString","editable","onPress","mode","display","OS","onChange","maximumDate","selectedValue","onValueChange","pickerStyle","position","width","opacity","itemStyle","pickerItemStyle","Item","label","sectionLabel","marginTop","marginBottom","restrictionButtonsContainer","map","isSelected","restrictionButton","restrictionButtonSelected","restrictionButtonText","restrictionButtonTextSelected","saveButton","saveText","create","flex","backgroundColor","flexGrow","justifyContent","padding","borderRadius","shadowColor","shadowOpacity","shadowRadius","elevation","fontSize","fontWeight","textAlign","flexDirection","alignItems","borderWidth","borderColor","paddingHorizontal","marginRight","paddingVertical","flexWrap"],"sources":["C:/Users/Usuário/Desktop/glucocare/src/screens/ProfileSetupScreen.tsx"],"sourcesContent":["import 'react-native-get-random-values';\nimport { useState, useEffect } from 'react';\nimport {\n    View,\n    Text,\n    TextInput,\n    TouchableOpacity,\n    StyleSheet,\n    Alert,\n    ScrollView,\n    Platform,\n} from 'react-native';\nimport { SafeAreaView } from 'react-native-safe-area-context';\nimport * as SecureStore from 'expo-secure-store';\nimport DateTimePicker, { DateTimePickerEvent } from '@react-native-community/datetimepicker';\nimport { Picker } from '@react-native-picker/picker';\nimport { Feather } from '@expo/vector-icons';\nimport { initDB, saveOrUpdateUser, getUser, UserProfile } from '../services/dbService'; \nimport { v4 as uuidv4 } from 'uuid';\nimport GoogleSyncService from '../services/googleSync';\nimport { NativeStackScreenProps } from '@react-navigation/native-stack';\nimport { RootStackParamList } from '../navigation/RootNavigator'; \n\ntype ProfileSetupScreenProps = NativeStackScreenProps<RootStackParamList, 'ProfileSetup'>;\n\n// Reflete os dados potencialmente incompletos salvos no SecureStore\ninterface SecureStoreProfile {\n    id?: string;\n    name?: string;\n    birthDate?: string;\n    condition?: string;\n    height?: number; \n    weight?: number; \n    restriction?: string;\n    email?: string;\n    googleId?: string;\n    // Removido 'provider' e 'biometricEnabled' daqui para evitar confusão se eles não forem salvos no DB\n    // provider?: 'manual' | 'google'; \n    // onboardingCompleted?: boolean; // Mantendo apenas o que realmente é necessário para carregar\n    // biometricEnabled?: boolean;\n}\n\n// Rascunho de perfil usado internamente, permitindo googleId opcional/nulo antes da persistência\ninterface DraftProfile {\n    id: string;\n    name: string;\n    birthDate: string;\n    condition: string;\n    height: number | null; \n    weight: number | null; \n    restriction: string; \n    email: string;\n    googleId: string | null; \n    onboardingCompleted: boolean;\n    biometricEnabled: boolean;\n    syncedAt: string; // Adicionado 'syncedAt'\n}\n\nexport default function ProfileSetupScreen({ navigation }: ProfileSetupScreenProps) {\n    const [userId, setUserId] = useState<string | null>(null);\n    const [name, setName] = useState<string>('');\n    const [email, setEmail] = useState<string>('');\n    const [googleId, setGoogleId] = useState<string | null>(null);\n    const [birthDate, setBirthDate] = useState<Date>(new Date(1990, 0, 1));\n    const [showDate, setShowDate] = useState<boolean>(false);\n    const [condition, setCondition] = useState<string>('');\n    const [height, setHeight] = useState<string>(''); \n    const [weight, setWeight] = useState<string>(''); \n    const [restrictions, setRestrictions] = useState<string[]>([]);\n\n    const restrictionOptions = [\n        'Lactose',\n        'Glúten',\n        'Amendoim',\n        'Ovos',\n        'Peixes',\n        'Crustáceos',\n        'Frutos Secos',\n    ];\n\n    useEffect(() => {\n        (async () => {\n            try {\n                await initDB();\n                const user = await getUser();\n\n                if (user) {\n                    // Carrega do DB (UserProfile)\n                    setUserId(user.id);\n                    setName(user.name); \n                    setEmail(user.email);\n                    setGoogleId(user.googleId || null);\n                    \n                    const dateString = user.birthDate;\n                    setBirthDate(dateString ? new Date(dateString) : new Date(1990, 0, 1));\n                    setCondition(user.condition);\n                    setHeight(user.height !== null ? String(user.height) : ''); \n                    setWeight(user.weight !== null ? String(user.weight) : ''); \n                    \n                    const userRestrictions = user.restriction;\n                    setRestrictions(userRestrictions.split(',').filter(r => r));\n                        \n                } else {\n                    // Tenta carregar do SecureStore\n                    const saved = await SecureStore.getItemAsync('user_profile');\n                    if (saved) {\n                        const profile: SecureStoreProfile = JSON.parse(saved); \n                        \n                        setUserId(profile.id ?? uuidv4()); \n                        setName(profile.name ?? ''); \n                        setEmail(profile.email ?? ''); \n                        setGoogleId(profile.googleId ?? null);\n                        \n                        const dateSaved = profile.birthDate;\n                        setBirthDate(dateSaved ? new Date(dateSaved) : new Date(1990, 0, 1));\n                        \n                        setCondition(profile.condition ?? ''); \n                        setHeight(profile.height ? String(profile.height) : ''); \n                        setWeight(profile.weight ? String(profile.weight) : ''); \n                        \n                        const savedRestrictions = profile.restriction ?? '';\n                        setRestrictions(savedRestrictions.split(',').filter(r => r));\n\n                    } else {\n                        setUserId(uuidv4());\n                    }\n                }\n            } catch (err) {\n                console.error('Erro ao inicializar perfil:', err);\n                setUserId(uuidv4());\n            }\n        })();\n    }, []);\n\n    const toggleRestriction = (item: string) => {\n        setRestrictions((prev) =>\n            prev.includes(item) ? prev.filter((r) => r !== item) : [...prev, item]\n        );\n    };\n\n    const parsedHeight = height ? Number(height.replace(',', '.')) : 0; \n    const parsedWeight = weight ? Number(weight.replace(',', '.')) : 0; \n\n    const onDateChange = (_event: DateTimePickerEvent, selected: Date | undefined) => {\n        setShowDate(false);\n        if (selected) {\n            setBirthDate(selected);\n        }\n    };\n\n    const handleSave = async () => {\n        try {\n            if (!name.trim()) return Alert.alert('Erro', 'Digite seu nome.');\n            if (!birthDate || isNaN(birthDate.getTime()))\n                return Alert.alert('Erro', 'Informe sua data de nascimento.');\n            if (!condition) return Alert.alert('Erro', 'Selecione sua condição.');\n            if (parsedHeight <= 0 || isNaN(parsedHeight)) return Alert.alert('Erro', 'Altura inválida (use cm).');\n            if (parsedWeight <= 0 || isNaN(parsedWeight)) return Alert.alert('Erro', 'Peso inválido.');\n\n            const registeredEmail = await SecureStore.getItemAsync('registered_email');\n            const finalEmail = email.trim() || registeredEmail || 'placeholder@app.com';\n            \n            // Define a data de sincronização atual (necessária pelo UserProfile)\n            const currentSyncedAt = new Date().toISOString(); \n\n            // 1. Cria o rascunho (DraftProfile: googleId pode ser null)\n            const draftProfile: DraftProfile = {\n                id: userId || uuidv4(),\n                name: name.trim(),\n                birthDate: birthDate.toISOString(),\n                condition,\n                height: parsedHeight,\n                weight: parsedWeight,\n                restriction: restrictions.join(','), \n                email: finalEmail, \n                googleId: googleId, \n                onboardingCompleted: true, \n                biometricEnabled: false, \n                syncedAt: currentSyncedAt, // Inicializa 'syncedAt'\n            };\n\n            // 2. Normaliza para UserProfile (UserProfile.googleId é string).\n            const profileToSave: UserProfile = {\n                ...draftProfile,\n                height: draftProfile.height ?? 0, // Garante que height é number\n                weight: draftProfile.weight ?? 0, // Garante que weight é number\n                googleId: draftProfile.googleId ?? '', // Garante que googleId é string\n            }\n            \n            // Usamos o objeto que tem apenas as propriedades permitidas por UserProfile\n            // Nota: O TypeScript agora deve estar feliz se 'UserProfile' inclui\n            // 'id', 'name', 'birthDate', 'condition', 'height', 'weight', 'restriction', \n            // 'email', 'googleId', 'onboardingCompleted', 'biometricEnabled', e 'syncedAt'.\n            const savedUser = await saveOrUpdateUser(profileToSave);\n            \n            if (typeof savedUser !== 'boolean') {\n                 await SecureStore.setItemAsync('user_profile', JSON.stringify(savedUser));\n            }\n\n            // Lógica de sincronização do Google Drive\n            try {\n                const token = await SecureStore.getItemAsync('google_token');\n                if (token && GoogleSyncService && typeof GoogleSyncService.uploadReadingsToDrive === 'function') {\n                    await GoogleSyncService.uploadReadingsToDrive(token); \n                }\n            } catch (err) {\n                console.warn('Falha ao sincronizar perfil (erro de execução do Drive):', err);\n            }\n\n            const biometricStatus = await SecureStore.getItemAsync('biometric_setup_done');\n\n            if (!biometricStatus) {\n                Alert.alert('Sucesso', 'Perfil criado! Próxima etapa: Biometria.');\n                navigation.replace('BiometricSetup');\n            } else {\n                Alert.alert('Sucesso', 'Perfil atualizado!');\n                navigation.replace('DrawerRoutes'); \n            }\n        } catch (err) {\n            console.error('handleSave profile - erro:', err);\n            Alert.alert('Erro', 'Não foi possível salvar o perfil.');\n        }\n    };\n\n    return (\n        <SafeAreaView style={styles.safe}>\n            <ScrollView contentContainerStyle={styles.container}>\n                <View style={styles.card}>\n                    <Text style={styles.title}>Configurações</Text>\n                    <Text style={styles.subtitle}>Edite suas informações pessoais</Text>\n\n                    {/* Nome */}\n                    <View style={styles.inputWrapper}>\n                        <Feather name=\"user\" size={18} color=\"#9ca3af\" style={styles.inputIcon} />\n                        <TextInput\n                            style={styles.input}\n                            placeholder=\"Nome Completo\"\n                            value={name}\n                            onChangeText={setName}\n                        />\n                    </View>\n\n                    {/* Data de nascimento */}\n                    <View style={styles.inputWrapper}>\n                        <Feather name=\"calendar\" size={18} color=\"#9ca3af\" style={styles.inputIcon} />\n                        <TextInput\n                            style={styles.input}\n                            placeholder=\"DD/MM/AAAA\"\n                            keyboardType=\"numeric\"\n                            value={birthDate.toLocaleDateString('pt-BR')}\n                            editable={false} \n                        />\n                        <TouchableOpacity onPress={() => setShowDate(true)}>\n                            <Feather name=\"calendar\" size={20} color=\"#2563eb\" />\n                        </TouchableOpacity>\n                    </View>\n                    {showDate && (\n                        <DateTimePicker\n                            value={birthDate}\n                            mode=\"date\"\n                            display={Platform.OS === 'ios' ? 'spinner' : 'default'}\n                            onChange={onDateChange} \n                            maximumDate={new Date()} \n                        />\n                    )}\n\n                    {/* Condição */}\n                    <View style={styles.inputWrapper}>\n                        <Feather name=\"list\" size={18} color=\"#9ca3af\" style={styles.inputIcon} />\n                        {Platform.OS === 'ios' ? (\n                            // Wrapper de texto para iOS\n                            <TextInput\n                                style={styles.input}\n                                placeholder=\"Selecione a Condição\"\n                                value={\n                                    condition === 'pre-diabetes' ? 'Pré-diabetes' :\n                                    condition === 'tipo-1' ? 'Diabetes Tipo 1' :\n                                    condition === 'tipo-2' ? 'Diabetes Tipo 2' :\n                                    ''\n                                }\n                                editable={false}\n                            />\n                        ) : null}\n                        <Picker\n                            selectedValue={condition}\n                            onValueChange={setCondition}\n                            style={[styles.pickerStyle, Platform.OS === 'ios' && { position: 'absolute', width: '100%', opacity: 0 }]}\n                            itemStyle={styles.pickerItemStyle}\n                        >\n                            <Picker.Item label=\"Selecione a Condição\" value=\"\" color=\"#9ca3af\" />\n                            <Picker.Item label=\"Pré-diabetes\" value=\"pre-diabetes\" />\n                            <Picker.Item label=\"Diabetes Tipo 1\" value=\"tipo-1\" />\n                            <Picker.Item label=\"Diabetes Tipo 2\" value=\"tipo-2\" />\n                        </Picker>\n                    </View>\n\n\n                    {/* Altura */}\n                    <View style={styles.inputWrapper}>\n                        <Feather name=\"trending-up\" size={18} color=\"#9ca3af\" style={styles.inputIcon} />\n                        <TextInput\n                            style={styles.input}\n                            placeholder=\"Altura (cm)\"\n                            keyboardType=\"numeric\"\n                            value={height}\n                            onChangeText={setHeight}\n                        />\n                    </View>\n\n                    {/* Peso */}\n                    <View style={styles.inputWrapper}>\n                        <Feather name=\"activity\" size={18} color=\"#9ca3af\" style={styles.inputIcon} />\n                        <TextInput\n                            style={styles.input}\n                            placeholder=\"Peso (kg)\"\n                            keyboardType=\"numeric\"\n                            value={weight}\n                            onChangeText={setWeight}\n                        />\n                    </View>\n\n                    {/* Restrições Alimentares */}\n                    <Text style={[styles.sectionLabel, { marginTop: 10, marginBottom: 5 }]}>Restrições Alimentares</Text>\n                    <View style={styles.restrictionButtonsContainer}>\n                        {restrictionOptions.map((item) => {\n                            const isSelected = restrictions.includes(item);\n                            return (\n                                <TouchableOpacity\n                                    key={item}\n                                    style={[\n                                        styles.restrictionButton,\n                                        isSelected && styles.restrictionButtonSelected,\n                                    ]}\n                                    onPress={() => toggleRestriction(item)}\n                                >\n                                    <Text\n                                        style={[\n                                            styles.restrictionButtonText,\n                                            isSelected && styles.restrictionButtonTextSelected,\n                                        ]}\n                                    >\n                                        {item}\n                                    </Text>\n                                </TouchableOpacity>\n                            );\n                        })}\n                    </View>\n\n                    {/* Botão Salvar */}\n                    <TouchableOpacity style={styles.saveButton} onPress={handleSave}>\n                        <Text style={styles.saveText}>Salvar Alterações</Text>\n                    </TouchableOpacity>\n                </View>\n            </ScrollView>\n        </SafeAreaView>\n    );\n}\n\nconst styles = StyleSheet.create({\n    safe: { flex: 1, backgroundColor: '#f0f6ff' },\n    container: { flexGrow: 1, justifyContent: 'center', padding: 16 },\n    card: {\n        backgroundColor: '#fff',\n        borderRadius: 16,\n        padding: 20,\n        shadowColor: '#000',\n        shadowOpacity: 0.08,\n        shadowRadius: 8,\n        elevation: 3,\n    },\n    title: {\n        fontSize: 22,\n        fontWeight: '700',\n        textAlign: 'center',\n        marginBottom: 4,\n        color: '#111827',\n    },\n    subtitle: { fontSize: 14, textAlign: 'center', color: '#6b7280', marginBottom: 20 },\n    inputWrapper: {\n        flexDirection: 'row',\n        alignItems: 'center',\n        borderWidth: 1,\n        borderColor: '#d1d5db',\n        borderRadius: 10,\n        marginBottom: 14,\n        paddingHorizontal: 12,\n        backgroundColor: '#fff',\n    },\n    inputIcon: { marginRight: 8 },\n    input: { flex: 1, fontSize: 15, paddingVertical: 10, color: '#111827' },\n    sectionLabel: { fontSize: 14, fontWeight: '600', marginBottom: 8, color: '#374151' },\n    restrictionButtonsContainer: {\n        flexDirection: 'row',\n        flexWrap: 'wrap',\n        justifyContent: 'flex-start',\n        marginBottom: 10,\n    },\n    restrictionButton: {\n        paddingVertical: 8,\n        paddingHorizontal: 12,\n        borderWidth: 1,\n        borderColor: '#d1d5db',\n        borderRadius: 20,\n        marginRight: 8,\n        marginBottom: 8,\n        backgroundColor: '#f9fafb',\n    },\n    restrictionButtonSelected: {\n        backgroundColor: '#2563eb',\n        borderColor: '#2563eb',\n    },\n    restrictionButtonText: {\n        color: '#374151',\n        fontSize: 13,\n        fontWeight: '500',\n    },\n    restrictionButtonTextSelected: {\n        color: '#fff',\n    },\n    saveButton: {\n        backgroundColor: '#2563eb',\n        padding: 14,\n        borderRadius: 10,\n        alignItems: 'center',\n        marginTop: 16,\n        shadowColor: '#000',\n        shadowOpacity: 0.1,\n        shadowRadius: 6,\n        elevation: 3,\n    },\n    saveText: { color: '#fff', fontWeight: '600', fontSize: 16 },\n    pickerStyle: {\n        flex: 1,\n        color: '#111827',\n        height: 40,\n    },\n    pickerItemStyle: {\n        fontSize: 15,\n    },\n});\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}