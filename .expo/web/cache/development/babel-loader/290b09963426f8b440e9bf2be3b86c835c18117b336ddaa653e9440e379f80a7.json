{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport React, { useEffect, useState } from \"react\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport Platform from \"react-native-web/dist/exports/Platform\";\nimport * as DocumentPicker from \"expo-document-picker\";\nimport { LinearGradient } from \"expo-linear-gradient\";\nimport { MaterialCommunityIcons, Feather, MaterialIcons } from \"@expo/vector-icons\";\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nvar BLEMock = {\n  startDeviceScan: function startDeviceScan(_filter1, _filter2, callback) {\n    setTimeout(function () {\n      callback(null, {\n        id: \"MOCK-1\",\n        name: \"Glicosímetro Simulado 1\"\n      });\n      setTimeout(function () {\n        callback(null, {\n          id: \"MOCK-2\",\n          name: \"Glicosímetro Simulado 2\"\n        });\n      }, 500);\n    }, 1000);\n  },\n  stopDeviceScan: function stopDeviceScan() {\n    console.log(\"Mock: Device scan stopped.\");\n  },\n  connectToDevice: function () {\n    var _connectToDevice = _asyncToGenerator(function* (id) {\n      console.log(\"Mock: Connecting to \" + id + \"...\");\n      yield new Promise(function (resolve) {\n        return setTimeout(resolve, 1500);\n      });\n      return {\n        id: id,\n        name: \"Dispositivo Simulado \" + id.split(\"-\")[1],\n        discoverAllServicesAndCharacteristics: function () {\n          var _discoverAllServicesAndCharacteristics = _asyncToGenerator(function* () {\n            console.log(\"Mock: Services discovered.\");\n          });\n          function discoverAllServicesAndCharacteristics() {\n            return _discoverAllServicesAndCharacteristics.apply(this, arguments);\n          }\n          return discoverAllServicesAndCharacteristics;\n        }()\n      };\n    });\n    function connectToDevice(_x) {\n      return _connectToDevice.apply(this, arguments);\n    }\n    return connectToDevice;\n  }(),\n  destroy: function destroy() {\n    console.log(\"Mock: BleManager instance destroyed.\");\n  }\n};\nvar BleManager = null;\nif (Platform.OS !== \"web\") {\n  try {\n    var _require = require(\"react-native-ble-plx\"),\n      NativeBle = _require.BleManager;\n    BleManager = NativeBle;\n  } catch (e) {\n    console.log(\"⚠️ BLE nativo não disponível. Usando mock. Erro:\", e.message);\n  }\n}\nvar DeviceConnectionScreen = function DeviceConnectionScreen(_ref) {\n  var _navigation = _ref.navigation;\n  var _useState = useState(null),\n    _useState2 = _slicedToArray(_useState, 2),\n    manager = _useState2[0],\n    setManager = _useState2[1];\n  var _useState3 = useState([]),\n    _useState4 = _slicedToArray(_useState3, 2),\n    devices = _useState4[0],\n    setDevices = _useState4[1];\n  var _useState5 = useState(null),\n    _useState6 = _slicedToArray(_useState5, 2),\n    connectedDevice = _useState6[0],\n    setConnectedDevice = _useState6[1];\n  var _useState7 = useState(false),\n    _useState8 = _slicedToArray(_useState7, 2),\n    scanning = _useState8[0],\n    setScanning = _useState8[1];\n  useEffect(function () {\n    var instance = BleManager ? new BleManager() : BLEMock;\n    setManager(instance);\n    return function () {\n      try {\n        if (instance && typeof instance.destroy === \"function\") {\n          instance.destroy();\n        }\n      } catch (e) {\n        if (e instanceof Error) {\n          console.warn(\"Erro ao destruir BLE Manager:\", e.message);\n        } else {\n          console.warn(\"Erro desconhecido ao destruir BLE Manager:\", e);\n        }\n      }\n    };\n  }, []);\n  var scanForDevices = function scanForDevices() {\n    if (!manager) {\n      Alert.alert(\"Erro de Inicialização\", \"O gerenciador Bluetooth não foi carregado corretamente.\");\n      return;\n    }\n    setDevices([]);\n    setScanning(true);\n    var discoveredIds = new Set();\n    if (scanning) {\n      manager.stopDeviceScan();\n    }\n    manager.startDeviceScan(null, null, function (error, device) {\n      if (error) {\n        console.error(\"Erro no scan BLE:\", error);\n        Alert.alert(\"Erro\", \"Falha ao escanear dispositivos.\");\n        setScanning(false);\n        manager.stopDeviceScan();\n        return;\n      }\n      if (device && device.name && !discoveredIds.has(device.id)) {\n        discoveredIds.add(device.id);\n        setDevices(function (prevDevices) {\n          return [].concat(_toConsumableArray(prevDevices), [device]);\n        });\n      }\n    });\n    var timeout = setTimeout(function () {\n      if (manager && typeof manager.stopDeviceScan === \"function\") {\n        manager.stopDeviceScan();\n        setScanning(false);\n      }\n    }, 8000);\n    return function () {\n      return clearTimeout(timeout);\n    };\n  };\n  var connectToDevice = function () {\n    var _ref2 = _asyncToGenerator(function* (device) {\n      if (scanning) {\n        manager.stopDeviceScan();\n        setScanning(false);\n      }\n      try {\n        var connected = yield manager.connectToDevice(device.id);\n        yield connected.discoverAllServicesAndCharacteristics();\n        setConnectedDevice(connected);\n        Alert.alert(\"Conectado!\", \"Dispositivo \" + (device.name || device.id) + \" conectado.\");\n      } catch (err) {\n        console.error(\"Erro ao conectar:\", err);\n        Alert.alert(\"Erro\", \"Não foi possível conectar ao dispositivo.\");\n      }\n    });\n    return function connectToDevice(_x2) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n  var handleFileImport = function () {\n    var _ref3 = _asyncToGenerator(function* () {\n      try {\n        var res = yield DocumentPicker.getDocumentAsync({\n          type: [\"text/csv\", \"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\", \"application/xml\", \"application/pdf\"],\n          copyToCacheDirectory: true\n        });\n        var result = res;\n        if (result.type === 'success' && result.assets && result.assets.length > 0) {\n          Alert.alert(\"Arquivo importado\", \"Nome: \" + result.assets[0].name);\n          console.log(\"Arquivo importado:\", result.assets[0]);\n        } else if (result.type === 'cancel') {\n          console.log(\"Importação de arquivo cancelada.\");\n        } else {\n          console.log(\"Falha na leitura ou nenhum arquivo selecionado.\");\n        }\n      } catch (err) {\n        console.error(\"Erro ao importar arquivo:\", err);\n        Alert.alert(\"Erro\", \"Não foi possível importar o arquivo.\");\n      }\n    });\n    return function handleFileImport() {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n  var renderHeader = function renderHeader() {\n    return _jsxs(View, {\n      children: [\"\\xA0 \\xA0 \\xA0 \", _jsxs(View, {\n        style: styles.card,\n        children: [\"\\xA0 \\xA0 \\xA0 \\xA0 \", _jsxs(View, {\n          style: styles.cardHeader,\n          children: [\"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", _jsx(MaterialCommunityIcons, {\n            name: \"bluetooth-connect\",\n            size: 22,\n            color: \"#2563eb\"\n          }), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", _jsx(Text, {\n            style: styles.cardTitle,\n            children: \"Conex\\xE3o Bluetooth\"\n          }), \"\\xA0 \\xA0 \\xA0 \\xA0 \"]\n        }), \"\\xA0 \\xA0 \\xA0 \\xA0 \", _jsxs(View, {\n          style: styles.centerIcon,\n          children: [\"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", _jsxs(View, {\n            style: styles.circleIcon,\n            children: [\"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", _jsx(MaterialCommunityIcons, {\n              name: \"cellphone\",\n              size: 40,\n              color: \"#2563eb\"\n            }), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \"]\n          }), \"\\xA0 \\xA0 \\xA0 \\xA0 \"]\n        }), \"\\xA0 \\xA0 \\xA0 \\xA0 \", _jsxs(View, {\n          style: [styles.statusBox, {\n            backgroundColor: connectedDevice ? \"#dcfce7\" : \"#f3f4f6\"\n          }],\n          children: [\"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", _jsx(MaterialCommunityIcons, {\n            name: connectedDevice ? \"check-circle\" : \"wifi-off\",\n            size: 18,\n            color: connectedDevice ? \"#16a34a\" : \"#9ca3af\"\n          }), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", _jsxs(Text, {\n            style: [styles.statusText, {\n              color: connectedDevice ? \"#16a34a\" : \"#6b7280\"\n            }],\n            children: [\"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", connectedDevice ? connectedDevice.name : \"Desconectado\", \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \"]\n          }), \"\\xA0 \\xA0 \\xA0 \\xA0 \"]\n        }), \"\\xA0 \\xA0 \\xA0 \\xA0 \", _jsxs(TouchableOpacity, {\n          style: {\n            borderRadius: 10,\n            overflow: \"hidden\",\n            marginBottom: 12\n          },\n          onPress: scanForDevices,\n          disabled: scanning,\n          children: [\"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", _jsxs(LinearGradient, {\n            colors: [\"#2563eb\", \"#4338ca\"],\n            start: {\n              x: 0,\n              y: 0\n            },\n            end: {\n              x: 1,\n              y: 1\n            },\n            style: styles.gradientButton,\n            children: [\"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", _jsx(MaterialCommunityIcons, {\n              name: \"bluetooth\",\n              size: 18,\n              color: \"#fff\"\n            }), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", _jsxs(Text, {\n              style: styles.buttonText,\n              children: [\"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", scanning ? \"Escaneando...\" : \"Conectar Glicosímetro\", \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \"]\n            }), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \"]\n          }), \"\\xA0 \\xA0 \\xA0 \\xA0 \"]\n        }), \"\\xA0 \\xA0 \\xA0 \\xA0 \", _jsxs(Text, {\n          style: styles.instructions,\n          children: [\"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\u2022 Certifique-se que o Bluetooth est\\xE1 ativado\", \"\\n\", \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\u2022 Coloque o glicos\\xEDmetro em modo de pareamento\", \"\\n\", \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\u2022 Mantenha os dispositivos pr\\xF3ximos \\xA0 \\xA0 \\xA0 \\xA0 \"]\n        }), \"\\xA0 \\xA0 \\xA0 \"]\n      }), \"\\xA0 \\xA0 \\xA0 \", _jsxs(View, {\n        style: styles.card,\n        children: [\"\\xA0 \\xA0 \\xA0 \\xA0 \", _jsxs(View, {\n          style: styles.cardHeader,\n          children: [\"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", _jsx(Feather, {\n            name: \"upload\",\n            size: 20,\n            color: \"#16a34a\"\n          }), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", _jsx(Text, {\n            style: styles.cardTitle,\n            children: \"Importar Arquivo\"\n          }), \"\\xA0 \\xA0 \\xA0 \\xA0 \"]\n        }), \"\\xA0 \\xA0 \\xA0 \\xA0 \", _jsxs(TouchableOpacity, {\n          style: styles.uploadBox,\n          onPress: handleFileImport,\n          children: [\"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", _jsx(MaterialCommunityIcons, {\n            name: \"file-upload\",\n            size: 48,\n            color: \"#16a34a\"\n          }), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", _jsxs(Text, {\n            style: styles.uploadText,\n            children: [\"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 Arraste seu arquivo aqui \", \"\\n\", \" ou clique para selecionar \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \"]\n          }), \"\\xA0 \\xA0 \\xA0 \\xA0 \"]\n        }), \"\\xA0 \\xA0 \\xA0 \\xA0 \", _jsx(Text, {\n          style: styles.formats,\n          children: \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 Formatos aceitos: CSV (.csv) \\xB7 Excel (.xlsx) \\xB7 XML (.xml) \\xB7 PDF (.pdf) \\xA0 \\xA0 \\xA0 \\xA0 \"\n        }), \"\\xA0 \\xA0 \\xA0 \\xA0 \", _jsxs(View, {\n          style: styles.infoBox,\n          children: [\"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", _jsx(Feather, {\n            name: \"info\",\n            size: 16,\n            color: \"#2563eb\"\n          }), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", _jsx(Text, {\n            style: styles.infoText,\n            children: \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 Como exportar do seu glicos\\xEDmetro: conecte o dispositivo no \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 computador e exporte os dados como CSV ou PDF atrav\\xE9s do software do \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 fabricante. \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \"\n          }), \"\\xA0 \\xA0 \\xA0 \\xA0 \"]\n        }), \"\\xA0 \\xA0 \\xA0 \"]\n      }), \"\\xA0 \\xA0 \\xA0 \", _jsxs(View, {\n        style: styles.row,\n        children: [\"\\xA0 \\xA0 \\xA0 \\xA0 \", _jsxs(View, {\n          style: [styles.card, styles.halfCard],\n          children: [\"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", _jsxs(View, {\n            style: styles.cardHeader,\n            children: [\"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", _jsx(MaterialIcons, {\n              name: \"devices\",\n              size: 22,\n              color: \"#2563eb\"\n            }), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", _jsx(Text, {\n              style: styles.cardTitle,\n              children: \"Bluetooth\"\n            }), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \"]\n          }), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", _jsx(Text, {\n            style: styles.listItem,\n            children: \"\\u2022 Accu-Chek Guide\"\n          }), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", _jsx(Text, {\n            style: styles.listItem,\n            children: \"\\u2022 OneTouch Verio\"\n          }), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", _jsx(Text, {\n            style: styles.listItem,\n            children: \"\\u2022 FreeStyle Libre\"\n          }), \"\\xA0 \\xA0 \\xA0 \\xA0 \"]\n        }), \"\\xA0 \\xA0 \\xA0 \\xA0 \", _jsxs(View, {\n          style: [styles.card, styles.halfCard],\n          children: [\"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", _jsxs(View, {\n            style: styles.cardHeader,\n            children: [\"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", _jsx(MaterialCommunityIcons, {\n              name: \"file-import\",\n              size: 22,\n              color: \"#16a34a\"\n            }), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", _jsx(Text, {\n              style: styles.cardTitle,\n              children: \"Importa\\xE7\\xE3o de Arquivos\"\n            }), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \"]\n          }), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", _jsx(Text, {\n            style: styles.listItem,\n            children: \"\\u2022 Arquivos CSV\"\n          }), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", _jsx(Text, {\n            style: styles.listItem,\n            children: \"\\u2022 Relat\\xF3rios PDF\"\n          }), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", _jsx(Text, {\n            style: styles.listItem,\n            children: \"\\u2022 Dados XML\"\n          }), \"\\xA0 \\xA0 \\xA0 \\xA0 \"]\n        }), \"\\xA0 \\xA0 \\xA0 \"]\n      }), \"\\xA0 \\xA0 \"]\n    });\n  };\n  return _jsx(FlatList, {\n    data: devices,\n    keyExtractor: function keyExtractor(item) {\n      return item.id;\n    },\n    renderItem: function renderItem(_ref4) {\n      var item = _ref4.item;\n      return _jsxs(TouchableOpacity, {\n        style: styles.deviceItem,\n        onPress: function onPress() {\n          return connectToDevice(item);\n        },\n        children: [\"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", _jsx(MaterialIcons, {\n          name: \"devices\",\n          size: 20,\n          color: \"#2563eb\"\n        }), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", _jsxs(View, {\n          style: {\n            marginLeft: 10\n          },\n          children: [\"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", _jsx(Text, {\n            style: styles.deviceName,\n            children: item.name || \"Sem nome\"\n          }), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \", _jsx(Text, {\n            style: styles.deviceId,\n            children: item.id\n          }), \"\\xA0 \\xA0 \\xA0 \\xA0 \\xA0 \"]\n        }), \"\\xA0 \\xA0 \\xA0 \\xA0 \"]\n      });\n    },\n    ListHeaderComponent: renderHeader,\n    style: styles.container\n  });\n};\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    padding: 16,\n    backgroundColor: \"#f1f5f9\"\n  },\n  card: {\n    backgroundColor: \"#fff\",\n    borderRadius: 12,\n    padding: 16,\n    marginBottom: 16,\n    shadowColor: \"#000\",\n    shadowOpacity: 0.05,\n    shadowRadius: 6,\n    elevation: 3\n  },\n  cardHeader: {\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    marginBottom: 12\n  },\n  cardTitle: {\n    fontSize: 16,\n    fontWeight: \"600\",\n    marginLeft: 8,\n    color: \"#111\"\n  },\n  centerIcon: {\n    alignItems: \"center\",\n    marginVertical: 10\n  },\n  circleIcon: {\n    width: 80,\n    height: 80,\n    borderRadius: 40,\n    backgroundColor: \"#e0ebff\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    marginBottom: 10\n  },\n  statusBox: {\n    flexDirection: \"row\",\n    alignSelf: \"center\",\n    alignItems: \"center\",\n    paddingVertical: 6,\n    paddingHorizontal: 12,\n    borderRadius: 20,\n    marginBottom: 14\n  },\n  statusText: {\n    fontSize: 14,\n    marginLeft: 6\n  },\n  gradientButton: {\n    flexDirection: \"row\",\n    padding: 12,\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    borderRadius: 8\n  },\n  buttonText: {\n    color: \"#fff\",\n    fontWeight: \"600\",\n    fontSize: 14,\n    marginLeft: 6\n  },\n  deviceItem: {\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    paddingVertical: 10,\n    borderBottomWidth: 1,\n    borderBottomColor: \"#eee\"\n  },\n  deviceName: {\n    fontSize: 15,\n    fontWeight: \"600\"\n  },\n  deviceId: {\n    fontSize: 12,\n    color: \"#666\"\n  },\n  instructions: {\n    fontSize: 13,\n    color: \"#555\",\n    marginTop: 10,\n    lineHeight: 20\n  },\n  uploadBox: {\n    borderWidth: 2,\n    borderStyle: \"dashed\",\n    borderColor: \"#ccc\",\n    padding: 20,\n    borderRadius: 12,\n    alignItems: \"center\",\n    marginBottom: 12\n  },\n  uploadText: {\n    fontSize: 13,\n    color: \"#444\",\n    fontWeight: \"500\",\n    textAlign: \"center\",\n    marginTop: 6\n  },\n  formats: {\n    fontSize: 12,\n    color: \"#555\",\n    marginBottom: 12\n  },\n  infoBox: {\n    flexDirection: \"row\",\n    alignItems: \"flex-start\",\n    backgroundColor: \"#e0f2fe\",\n    borderRadius: 8,\n    padding: 10\n  },\n  infoText: {\n    flex: 1,\n    marginLeft: 6,\n    fontSize: 12,\n    color: \"#1e3a8a\"\n  },\n  row: {\n    flexDirection: \"row\",\n    justifyContent: \"space-between\"\n  },\n  halfCard: {\n    flex: 1,\n    marginRight: 8\n  },\n  listItem: {\n    fontSize: 13,\n    color: \"#333\",\n    marginBottom: 6\n  }\n});\nexport default DeviceConnectionScreen;","map":{"version":3,"names":["React","useEffect","useState","View","Text","StyleSheet","TouchableOpacity","FlatList","Alert","Platform","DocumentPicker","LinearGradient","MaterialCommunityIcons","Feather","MaterialIcons","jsx","_jsx","jsxs","_jsxs","BLEMock","startDeviceScan","_filter1","_filter2","callback","setTimeout","id","name","stopDeviceScan","console","log","connectToDevice","_connectToDevice","_asyncToGenerator","Promise","resolve","split","discoverAllServicesAndCharacteristics","_discoverAllServicesAndCharacteristics","apply","arguments","_x","destroy","BleManager","OS","_require","require","NativeBle","e","message","DeviceConnectionScreen","_ref","_navigation","navigation","_useState","_useState2","_slicedToArray","manager","setManager","_useState3","_useState4","devices","setDevices","_useState5","_useState6","connectedDevice","setConnectedDevice","_useState7","_useState8","scanning","setScanning","instance","Error","warn","scanForDevices","alert","discoveredIds","Set","error","device","has","add","prevDevices","concat","_toConsumableArray","timeout","clearTimeout","_ref2","connected","err","_x2","handleFileImport","_ref3","res","getDocumentAsync","type","copyToCacheDirectory","result","assets","length","renderHeader","children","style","styles","card","cardHeader","size","color","cardTitle","centerIcon","circleIcon","statusBox","backgroundColor","statusText","borderRadius","overflow","marginBottom","onPress","disabled","colors","start","x","y","end","gradientButton","buttonText","instructions","uploadBox","uploadText","formats","infoBox","infoText","row","halfCard","listItem","data","keyExtractor","item","renderItem","_ref4","deviceItem","marginLeft","deviceName","deviceId","ListHeaderComponent","container","create","flex","padding","shadowColor","shadowOpacity","shadowRadius","elevation","flexDirection","alignItems","fontSize","fontWeight","marginVertical","width","height","justifyContent","alignSelf","paddingVertical","paddingHorizontal","borderBottomWidth","borderBottomColor","marginTop","lineHeight","borderWidth","borderStyle","borderColor","textAlign","marginRight"],"sources":["C:/Users/Usuário/Desktop/glucocare/src/screens/DeviceConnectionScreen.tsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport {\n  View,\n  Text,\n  StyleSheet,\n  TouchableOpacity,\n  FlatList,\n  Alert,\n  Platform,\n} from \"react-native\";\n// IMPORTANTE: O tipo 'DocumentPickerResult' não é estritamente necessário aqui,\n// mas 'as any' é usado para contornar problemas de tipagem.\nimport * as DocumentPicker from \"expo-document-picker\";\nimport { LinearGradient } from \"expo-linear-gradient\";\nimport {\n  MaterialCommunityIcons,\n  Feather,\n  MaterialIcons,\n} from \"@expo/vector-icons\";\n\n// Tipos de dados para as leituras de dispositivos\ninterface Device {\n  id: string;\n  name: string;\n}\n\ninterface ConnectionProps {\n  navigation: any;\n}\n\nconst BLEMock = {\n  startDeviceScan: (_filter1: any, _filter2: any, callback: Function) => {\n    setTimeout(() => {\n      callback(null, { id: \"MOCK-1\", name: \"Glicosímetro Simulado 1\" });\n      setTimeout(() => {\n        callback(null, { id: \"MOCK-2\", name: \"Glicosímetro Simulado 2\" });\n      }, 500);\n    }, 1000);\n  },\n  stopDeviceScan: () => {\n    console.log(\"Mock: Device scan stopped.\");\n  },\n  connectToDevice: async (id: string) => {\n    console.log(`Mock: Connecting to ${id}...`);\n    await new Promise((resolve) => setTimeout(resolve, 1500));\n    return {\n      id,\n      name: `Dispositivo Simulado ${id.split(\"-\")[1]}`,\n      discoverAllServicesAndCharacteristics: async () => {\n        console.log(\"Mock: Services discovered.\");\n      },\n    };\n  },\n  destroy: () => {\n    console.log(\"Mock: BleManager instance destroyed.\");\n  },\n};\n\nlet BleManager: any = null;\nif (Platform.OS !== \"web\") {\n  try {\n    // Tenta carregar o módulo nativo em plataformas que não são Web (incluindo Android)\n    const { BleManager: NativeBle } = require(\"react-native-ble-plx\");\n    BleManager = NativeBle;\n  } catch (e: any) {\n    console.log(\"⚠️ BLE nativo não disponível. Usando mock. Erro:\", e.message);\n  }\n}\n\nconst DeviceConnectionScreen: React.FC<ConnectionProps> = ({ navigation: _navigation }) => {\n  const [manager, setManager] = useState<any>(null);\n  const [devices, setDevices] = useState<Device[]>([]);\n  const [connectedDevice, setConnectedDevice] = useState<Device | null>(null);\n  const [scanning, setScanning] = useState(false);\n\n  useEffect(() => {\n    const instance = BleManager ? new BleManager() : BLEMock;\n    setManager(instance);\n\n    return () => {\n      try {\n        if (instance && typeof instance.destroy === \"function\") {\n          instance.destroy();\n        }\n      } catch (e: unknown) { \n        if (e instanceof Error) {\n            console.warn(\"Erro ao destruir BLE Manager:\", e.message);\n        } else {\n            console.warn(\"Erro desconhecido ao destruir BLE Manager:\", e);\n        }\n      }\n    };\n  }, []);\n\n  const scanForDevices = () => {\n    if (!manager) {\n      Alert.alert(\n        \"Erro de Inicialização\",\n        \"O gerenciador Bluetooth não foi carregado corretamente.\"\n      );\n      return;\n    }\n\n    setDevices([]);\n    setScanning(true);\n    const discoveredIds = new Set();\n\n    if (scanning) {\n      manager.stopDeviceScan();\n    }\n\n    manager.startDeviceScan(null, null, (error: any, device: Device) => {\n      if (error) {\n        console.error(\"Erro no scan BLE:\", error);\n        Alert.alert(\"Erro\", \"Falha ao escanear dispositivos.\");\n        setScanning(false);\n        manager.stopDeviceScan();\n        return;\n      }\n\n      if (device && device.name && !discoveredIds.has(device.id)) {\n        discoveredIds.add(device.id);\n        setDevices((prevDevices) => [...prevDevices, device]);\n      }\n    });\n\n    const timeout = setTimeout(() => {\n      if (manager && typeof manager.stopDeviceScan === \"function\") {\n        manager.stopDeviceScan();\n        setScanning(false);\n      }\n    }, 8000);\n\n    return () => clearTimeout(timeout);\n  };\n\n  const connectToDevice = async (device: Device) => {\n    if (scanning) {\n      manager.stopDeviceScan();\n      setScanning(false);\n    }\n\n    try {\n      const connected = await manager.connectToDevice(device.id);\n      await connected.discoverAllServicesAndCharacteristics();\n      setConnectedDevice(connected);\n      Alert.alert(\n        \"Conectado!\",\n        `Dispositivo ${device.name || device.id} conectado.`\n      );\n    } catch (err) {\n      console.error(\"Erro ao conectar:\", err);\n      Alert.alert(\"Erro\", \"Não foi possível conectar ao dispositivo.\");\n    }\n  };\n\n  const handleFileImport = async () => {\n    try {\n      const res = await DocumentPicker.getDocumentAsync({\n        type: [\n          \"text/csv\",\n          \"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\",\n          \"application/xml\",\n          \"application/pdf\",\n        ],\n        copyToCacheDirectory: true,\n      });\n\n      // CORREÇÃO DEFINITIVA DO TS2339:\n      // Asserção de tipo para 'any' para forçar o TypeScript a aceitar \n      // a propriedade 'assets', que é a estrutura correta no Android.\n      const result = res as any;\n\n      if (result.type === 'success' && result.assets && result.assets.length > 0) {\n        Alert.alert(\"Arquivo importado\", `Nome: ${result.assets[0].name}`);\n        console.log(\"Arquivo importado:\", result.assets[0]);\n      } else if (result.type === 'cancel') {\n        console.log(\"Importação de arquivo cancelada.\");\n      } else {\n        console.log(\"Falha na leitura ou nenhum arquivo selecionado.\");\n      }\n    } catch (err) {\n      console.error(\"Erro ao importar arquivo:\", err);\n      Alert.alert(\"Erro\", \"Não foi possível importar o arquivo.\");\n    }\n  };\n\n  const renderHeader = () => (\n    <View>\n      <View style={styles.card}>\n        <View style={styles.cardHeader}>\n          <MaterialCommunityIcons\n            name=\"bluetooth-connect\"\n            size={22}\n            color=\"#2563eb\"\n          />\n          <Text style={styles.cardTitle}>Conexão Bluetooth</Text>\n        </View>\n\n        <View style={styles.centerIcon}>\n          <View style={styles.circleIcon}>\n            <MaterialCommunityIcons name=\"cellphone\" size={40} color=\"#2563eb\" />\n          </View>\n        </View>\n\n        <View\n          style={[\n            styles.statusBox,\n            { backgroundColor: connectedDevice ? \"#dcfce7\" : \"#f3f4f6\" },\n          ]}\n        >\n          <MaterialCommunityIcons\n            name={connectedDevice ? \"check-circle\" : \"wifi-off\"}\n            size={18}\n            color={connectedDevice ? \"#16a34a\" : \"#9ca3af\"}\n          />\n          <Text\n            style={[\n              styles.statusText,\n              { color: connectedDevice ? \"#16a34a\" : \"#6b7280\" },\n            ]}\n          >\n            {connectedDevice ? connectedDevice.name : \"Desconectado\"}\n          </Text>\n        </View>\n\n        <TouchableOpacity\n          style={{ borderRadius: 10, overflow: \"hidden\", marginBottom: 12 }}\n          onPress={scanForDevices}\n          disabled={scanning}\n        >\n          <LinearGradient\n            colors={[\"#2563eb\", \"#4338ca\"]}\n            start={{ x: 0, y: 0 }}\n            end={{ x: 1, y: 1 }}\n            style={styles.gradientButton}\n          >\n            <MaterialCommunityIcons name=\"bluetooth\" size={18} color=\"#fff\" />\n            <Text style={styles.buttonText}>\n              {scanning ? \"Escaneando...\" : \"Conectar Glicosímetro\"}\n            </Text>\n          </LinearGradient>\n        </TouchableOpacity>\n\n        <Text style={styles.instructions}>\n          • Certifique-se que o Bluetooth está ativado{\"\\n\"}\n          • Coloque o glicosímetro em modo de pareamento{\"\\n\"}\n          • Mantenha os dispositivos próximos\n        </Text>\n      </View>\n\n      <View style={styles.card}>\n        <View style={styles.cardHeader}>\n          <Feather name=\"upload\" size={20} color=\"#16a34a\" />\n          <Text style={styles.cardTitle}>Importar Arquivo</Text>\n        </View>\n\n        <TouchableOpacity style={styles.uploadBox} onPress={handleFileImport}>\n          <MaterialCommunityIcons name=\"file-upload\" size={48} color=\"#16a34a\" />\n          <Text style={styles.uploadText}>\n            Arraste seu arquivo aqui {\"\\n\"} ou clique para selecionar\n          </Text>\n        </TouchableOpacity>\n\n        <Text style={styles.formats}>\n          Formatos aceitos: CSV (.csv) · Excel (.xlsx) · XML (.xml) · PDF (.pdf)\n        </Text>\n\n        <View style={styles.infoBox}>\n          <Feather name=\"info\" size={16} color=\"#2563eb\" />\n          <Text style={styles.infoText}>\n            Como exportar do seu glicosímetro: conecte o dispositivo no\n            computador e exporte os dados como CSV ou PDF através do software do\n            fabricante.\n          </Text>\n        </View>\n      </View>\n\n      <View style={styles.row}>\n        <View style={[styles.card, styles.halfCard]}>\n          <View style={styles.cardHeader}>\n            <MaterialIcons name=\"devices\" size={22} color=\"#2563eb\" />\n            <Text style={styles.cardTitle}>Bluetooth</Text>\n          </View>\n          <Text style={styles.listItem}>• Accu-Chek Guide</Text>\n          <Text style={styles.listItem}>• OneTouch Verio</Text>\n          <Text style={styles.listItem}>• FreeStyle Libre</Text>\n        </View>\n\n        <View style={[styles.card, styles.halfCard]}>\n          <View style={styles.cardHeader}>\n            <MaterialCommunityIcons\n              name=\"file-import\"\n              size={22}\n              color=\"#16a34a\"\n            />\n            <Text style={styles.cardTitle}>Importação de Arquivos</Text>\n          </View>\n          <Text style={styles.listItem}>• Arquivos CSV</Text>\n          <Text style={styles.listItem}>• Relatórios PDF</Text>\n          <Text style={styles.listItem}>• Dados XML</Text>\n        </View>\n      </View>\n    </View>\n  );\n\n  return (\n    <FlatList\n      data={devices}\n      keyExtractor={(item) => item.id}\n      renderItem={({ item }) => (\n        <TouchableOpacity\n          style={styles.deviceItem}\n          onPress={() => connectToDevice(item)}\n        >\n          <MaterialIcons name=\"devices\" size={20} color=\"#2563eb\" />\n          <View style={{ marginLeft: 10 }}>\n            <Text style={styles.deviceName}>{item.name || \"Sem nome\"}</Text>\n            <Text style={styles.deviceId}>{item.id}</Text>\n          </View>\n        </TouchableOpacity>\n      )}\n      ListHeaderComponent={renderHeader}\n      style={styles.container}\n    />\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: { flex: 1, padding: 16, backgroundColor: \"#f1f5f9\" },\n\n  card: {\n    backgroundColor: \"#fff\",\n    borderRadius: 12,\n    padding: 16,\n    marginBottom: 16,\n    shadowColor: \"#000\",\n    shadowOpacity: 0.05,\n    shadowRadius: 6,\n    elevation: 3,\n  },\n  cardHeader: { flexDirection: \"row\", alignItems: \"center\", marginBottom: 12 },\n  cardTitle: { fontSize: 16, fontWeight: \"600\", marginLeft: 8, color: \"#111\" },\n\n  centerIcon: { alignItems: \"center\", marginVertical: 10 },\n  circleIcon: {\n    width: 80,\n    height: 80,\n    borderRadius: 40,\n    backgroundColor: \"#e0ebff\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    marginBottom: 10,\n  },\n\n  statusBox: {\n    flexDirection: \"row\",\n    alignSelf: \"center\",\n    alignItems: \"center\",\n    paddingVertical: 6,\n    paddingHorizontal: 12,\n    borderRadius: 20,\n    marginBottom: 14,\n  },\n  statusText: { fontSize: 14, marginLeft: 6 },\n\n  gradientButton: {\n    flexDirection: \"row\",\n    padding: 12,\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    borderRadius: 8,\n  },\n  buttonText: { color: \"#fff\", fontWeight: \"600\", fontSize: 14, marginLeft: 6 },\n\n  deviceItem: {\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    paddingVertical: 10,\n    borderBottomWidth: 1,\n    borderBottomColor: \"#eee\",\n  },\n  deviceName: { fontSize: 15, fontWeight: \"600\" },\n  deviceId: { fontSize: 12, color: \"#666\" },\n\n  instructions: { fontSize: 13, color: \"#555\", marginTop: 10, lineHeight: 20 },\n\n  uploadBox: {\n    borderWidth: 2,\n    borderStyle: \"dashed\",\n    borderColor: \"#ccc\",\n    padding: 20,\n    borderRadius: 12,\n    alignItems: \"center\",\n    marginBottom: 12,\n  },\n  uploadText: {\n    fontSize: 13,\n    color: \"#444\",\n    fontWeight: \"500\",\n    textAlign: \"center\",\n    marginTop: 6,\n  },\n  formats: { fontSize: 12, color: \"#555\", marginBottom: 12 },\n\n  infoBox: {\n    flexDirection: \"row\",\n    alignItems: \"flex-start\",\n    backgroundColor: \"#e0f2fe\",\n    borderRadius: 8,\n    padding: 10,\n  },\n  infoText: { flex: 1, marginLeft: 6, fontSize: 12, color: \"#1e3a8a\" },\n\n  row: { flexDirection: \"row\", justifyContent: \"space-between\" },\n  halfCard: { flex: 1, marginRight: 8 },\n  listItem: { fontSize: 13, color: \"#333\", marginBottom: 6 },\n});\n\nexport default DeviceConnectionScreen;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}